<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="en"
      th:replace="~{layout/layout :: layout(~{::title}, ~{::main}, ~{::script}, 'index')}">
<head>
    <title>Dashboard - DriveSmart</title>
</head>
<body>
    <main th:fragment="main-content">
        <!-- Header Section -->
        <div class="card mb-4" style="background: linear-gradient(135deg, #A7A5C6, #8797B2); border: none; color: white;">
            <div class="container text-center">
                <h1 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem;">Welcome to DriveSmart</h1>
                <p style="font-size: 1.125rem; opacity: 0.9;">Professional fleet management at your fingertips</p>
            </div>
        </div>

        <!-- Stats Overview -->
        <div class="container mb-4">
            <div class="grid-4">
                <div class="card text-center">
                    <div style="margin-bottom: 0.5rem;"><img src="/images/logov1-removebg-preview.png" alt="Cars" style="height:40px"></div>
                    <div style="font-size: 2rem; font-weight: bold; color: #5D707F;" th:text="${carsCount ?: '42'}">42</div>
                    <div style="color: #6C757D; font-size: 0.875rem;">Total Vehicles</div>
                    <div style="display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #66CED6; margin-top: 0.5rem;">
                        <span>â†‘ 8%</span>
                    </div>
                </div>

                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: #66CED6; margin-bottom: 0.5rem;">âœ…</div>
                    <div style="font-size: 2rem; font-weight: bold; color: #5D707F;" th:text="${availableCars ?: '28'}">28</div>
                    <div style="color: #6C757D; font-size: 0.875rem;">Available Cars</div>
                    <div style="display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #66CED6; margin-top: 0.5rem;">
                        <span>â†‘ 12%</span>
                    </div>
                </div>

                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: #66CED6; margin-bottom: 0.5rem;">ðŸ“…</div>
                    <div style="font-size: 2rem; font-weight: bold; color: #5D707F;" th:text="${activeBookings ?: '15'}">15</div>
                    <div style="color: #6C757D; font-size: 0.875rem;">Active Bookings</div>
                    <div style="display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #66CED6; margin-top: 0.5rem;">
                        <span>â†‘ 5%</span>
                    </div>
                </div>

                <div class="card text-center">
                    <div style="font-size: 2.5rem; color: #66CED6; margin-bottom: 0.5rem;">ðŸ’°</div>
                    <div style="font-size: 2rem; font-weight: bold; color: #5D707F;">$24.8k</div>
                    <div style="color: #6C757D; font-size: 0.875rem;">Monthly Revenue</div>
                    <div style="display: flex; align-items: center; justify-content: center; font-size: 0.75rem; color: #66CED6; margin-top: 0.5rem;">
                        <span>â†‘ 15%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="container mb-4">
            <div class="grid-4">
                <a th:href="@{/cars}" class="card" style="text-decoration: none; color: inherit;">
                    <div style="margin-bottom: 1rem;"><img src="/images/logov1-removebg-preview.png" alt="Cars" style="height:24px"></div>
                    <h3 style="font-size: 1.25rem; font-weight: 600; color: #5D707F; margin-bottom: 0.5rem;">Fleet Management</h3>
                    <p style="color: #6C757D; font-size: 0.875rem;">Manage your vehicle inventory, add new cars, update details, and track maintenance.</p>
                    <span style="color: #66CED6; font-weight: 500; font-size: 0.875rem; display: inline-block; margin-top: 0.5rem;">Go to Fleet â†’</span>
                </a>

                <a th:href="@{/bookings}" class="card" style="text-decoration: none; color: inherit;">
                    <div style="font-size: 1.5rem; color: #66CED6; margin-bottom: 1rem;">ðŸ“…</div>
                    <h3 style="font-size: 1.25rem; font-weight: 600; color: #5D707F; margin-bottom: 0.5rem;">Booking Management</h3>
                    <p style="color: #6C757D; font-size: 0.875rem;">Handle reservations, check availability, process returns, and manage schedules.</p>
                    <span style="color: #66CED6; font-weight: 500; font-size: 0.875rem; display: inline-block; margin-top: 0.5rem;">View Bookings â†’</span>
                </a>

                <a th:href="@{/customers}" class="card" style="text-decoration: none; color: inherit;">
                    <div style="font-size: 1.5rem; color: #66CED6; margin-bottom: 1rem;">ðŸ‘¥</div>
                    <h3 style="font-size: 1.25rem; font-weight: 600; color: #5D707F; margin-bottom: 0.5rem;">Customer Service</h3>
                    <p style="color: #6C757D; font-size: 0.875rem;">View customer profiles, manage loyalty programs, and handle support requests.</p>
                    <span style="color: #66CED6; font-weight: 500; font-size: 0.875rem; display: inline-block; margin-top: 0.5rem;">Manage Customers â†’</span>
                </a>

                <div sec:authorize="hasRole('ADMIN')" class="card">
                    <div style="font-size: 1.5rem; color: #66CED6; margin-bottom: 1rem;">ðŸ“Š</div>
                    <h3 style="font-size: 1.25rem; font-weight: 600; color: #5D707F; margin-bottom: 0.5rem;">Analytics & Reports</h3>
                    <p style="color: #6C757D; font-size: 0.875rem;">Generate detailed reports, track performance metrics, and analyze business insights.</p>
                    <span style="color: #66CED6; font-weight: 500; font-size: 0.875rem; display: inline-block; margin-top: 0.5rem;">View Reports â†’</span>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="container">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #E9ECEF;">
                    <h2 style="font-size: 1.5rem; font-weight: 600; color: #5D707F;">Recent Activity</h2>
                    <a th:href="@{/activity}" class="btn btn-outline" style="font-size: 0.875rem;">View All</a>
                </div>

                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <div style="display: flex; align-items: center; gap: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #F8F9FA;">
                        <div style="width: 2.5rem; height: 2.5rem; background: #F8F9FA; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #66CED6;">
                            <img src="/images/logov1-removebg-preview.png" alt="Car" style="height:20px">
                        </div>
                        <div>
                            <p style="color: #5D707F; font-weight: 500; margin-bottom: 0.25rem;">BMW X3 returned successfully</p>
                            <span style="color: #6C757D; font-size: 0.75rem;">2 hours ago â€¢ John Smith</span>
                        </div>
                    </div>

                    <div style="display: flex; align-items: center; gap: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #F8F9FA;">
                        <div style="width: 2.5rem; height: 2.5rem; background: #F8F9FA; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #66CED6;">
                            ðŸ‘¤
                        </div>
                        <div>
                            <p style="color: #5D707F; font-weight: 500; margin-bottom: 0.25rem;">New customer registration</p>
                            <span style="color: #6C757D; font-size: 0.75rem;">4 hours ago â€¢ Sarah Johnson</span>
                        </div>
                    </div>

                    <div style="display: flex; align-items: center; gap: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #F8F9FA;">
                        <div style="width: 2.5rem; height: 2.5rem; background: #F8F9FA; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #66CED6;">
                            ðŸ”§
                        </div>
                        <div>
                            <p style="color: #5D707F; font-weight: 500; margin-bottom: 0.25rem;">Maintenance scheduled for Tesla Model 3</p>
                            <span style="color: #6C757D; font-size: 0.75rem;">6 hours ago â€¢ Mike Chen</span>
                        </div>
                    </div>

                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <div style="width: 2.5rem; height: 2.5rem; background: #F8F9FA; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #66CED6;">
                            ðŸ“…
                        </div>
                        <div>
                            <p style="color: #5D707F; font-weight: 500; margin-bottom: 0.25rem;">Audi Q5 booked for weekend</p>
                            <span style="color: #6C757D; font-size: 0.75rem;">8 hours ago â€¢ David Wilson</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <th:block th:fragment="scripts">
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                console.log('Dashboard loaded');
                
                // Auto-refresh stats every 5 minutes
                setInterval(function() {
                    console.log('Refreshing dashboard stats...');
                    // In production, this would fetch fresh data
                }, 300000);
                
                // Add subtle hover effects to cards
                document.querySelectorAll('.card').forEach(card => {
                    card.addEventListener('mouseenter', function() {
                        if (!this.style.transform.includes('translateY')) {
                            this.style.transform = 'translateY(-4px)';
                        }
                    });
                    card.addEventListener('mouseleave', function() {
                        this.style.transform = '';
                    });
                });
            });
        </script>
    </th:block>
</body>
</html>
